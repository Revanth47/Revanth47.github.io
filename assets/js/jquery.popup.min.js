!function(t,e){t.fn.popup=function(e){var n=this.selector,i=new t.Popup(e);return t(document).on("click.popup",n,function(n){var r=e&&e.content?e.content:t(this).attr("href");n.preventDefault(),i.open(r,void 0,this)}),this.each(function(){t(this).data("popup",i)})},t.Popup=function(n){function i(e){var n;return t.each(e,function(t,e){return e?(n=e,!1):void 0}),n}function r(e){return"function"==typeof e?"function":e instanceof t?"jQuery":"#"===e.substr(0,1)||"."===e.substr(0,1)?"inline":-1!==t.inArray(e.substr(e.length-3),h)?"image":"http"===e.substr(0,4)?"external":"ajax"}function o(n){d&&d.fadeOut("fast",function(){t(this).remove()});var i=!0;void 0===u&&(i=!1,u=t('<div class="'+f.o.containerClass+'">'),p=t(f.o.markup).appendTo(u),t(f.o.closeContent).one("click",function(){f.close()}).appendTo(u),t(e).resize(f.center),u.appendTo(t("body")).css("opacity",0));var r=t("."+f.o.contentClass,u);f.width?r.css("width",f.width,10):r.css("width",""),f.height?r.css("height",f.height,10):r.css("height",""),p.hasClass(f.o.contentClass)?p.html(n):p.find("."+f.o.contentClass).html(n),i?f.o.replaced.call(f,u,c):f.o.show.call(f,u,c)}function a(t,e){var n=RegExp("[?&]"+t+"=([^&]*)").exec(e);return n&&decodeURIComponent(n[1].replace(/\+/g," "))}var s,l,c,u,d,p,f=this,h=["png","jpg","gif"];f.ele=void 0,f.o=t.extend(!0,{},{backClass:"popup_back",backOpacity:.7,containerClass:"popup_cont",closeContent:'<div class="popup_close">&times;</div>',markup:'<div class="popup"><div class="popup_content"/></div>',contentClass:"popup_content",preloaderContent:'<p class="preloader">Loading</p>',activeClass:"popup_active",hideFlash:!1,speed:200,popupPlaceholderClass:"popup_placeholder",keepInlineChanges:!0,modal:!1,content:null,type:"auto",width:null,height:null,typeParam:"pt",widthParam:"pw",heightParam:"ph",beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){},error:function(){},show:function(t){var e=this;e.center(),t.animate({opacity:1},e.o.speed,function(){e.o.afterOpen.call(e)})},replaced:function(){this.center().o.afterOpen.call(this)},hide:function(t){void 0!==t&&t.animate({opacity:0},this.o.speed)},types:{inline:function(e,n){var i=t(e);i.addClass(f.o.popupPlaceholderClass),f.o.keepInlineChanges||(l=i.html()),n.call(this,i.children())},image:function(e,n){var i=this;t("<img />").one("load",function(){var t=this;setTimeout(function(){n.call(i,t)},0)}).one("error",function(){f.o.error.call(f,e,"image")}).attr("src",e).each(function(){this.complete&&t(this).trigger("load")})},external:function(e,n){var i=t("<iframe />").attr({src:e,frameborder:0,width:f.width,height:f.height});n.call(this,i)},html:function(t,e){e.call(this,t)},jQuery:function(t,e){e.call(this,t.html())},"function":function(t,e){e.call(this,t.call(f))},ajax:function(e,n){t.ajax({url:e,success:function(t){n.call(this,t)},error:function(){f.o.error.call(f,e,"ajax")}})}}},n),f.open=function(e,n,l){if(e=void 0===e||"#"===e?f.o.content:e,null===e)return f.o.error.call(f,e,s),!1;if(void 0!==l&&(f.ele&&f.o.activeClass&&t(f.ele).removeClass(f.o.activeClass),f.ele=l,f.ele&&f.o.activeClass&&t(f.ele).addClass(f.o.activeClass)),void 0===c&&(c=t('<div class="'+f.o.backClass+'"/>').appendTo(t("body")).css("opacity",0).animate({opacity:f.o.backOpacity},f.o.speed),f.o.modal||c.one("click.popup",function(){f.close()}),f.o.hideFlash&&t("object, embed").css("visibility","hidden"),f.o.preloaderContent&&(d=t(f.o.preloaderContent).appendTo(t("body")))),n=i([n,f.o.type]),s=n="auto"===n?r(e):n,f.width=f.o.width?f.o.width:null,f.height=f.o.height?f.o.height:null,-1===t.inArray(n,["inline","jQuery","function"])){l=a(f.o.typeParam,e);var u=a(f.o.widthParam,e),p=a(f.o.heightParam,e);n=null!==l?l:n,f.width=null!==u?u:f.width,f.height=null!==p?p:f.height}f.o.beforeOpen.call(f,n),f.o.types[n]?f.o.types[n].call(f,e,o):f.o.types.ajax.call(f,e,o)},f.close=function(){return f.o.beforeClose.call(f),"inline"===s&&f.o.keepInlineChanges&&(l=t("."+f.o.contentClass).html()),void 0!==c&&c.animate({opacity:0},f.o.speed,function(){f.cleanUp()}),f.o.hide.call(f,u,c),f},f.cleanUp=function(){c.add(u).remove(),u=c=void 0,t(e).unbind("resize",f.center),f.o.hideFlash&&t("object, embed").css("visibility","visible"),f.ele&&f.o.activeClass&&t(f.ele).removeClass(f.o.activeClass);var n=t("."+f.o.popupPlaceholderClass);return"inline"==s&&n.length&&n.html(l).removeClass(f.o.popupPlaceholderClass),s=null,f.o.afterClose.call(f),f},f.center=function(){return u.css(f.getCenter()),c.css({height:document.documentElement.clientHeight}),f},f.getCenter=function(){var t=u.children().outerWidth(!0),e=u.children().outerHeight(!0);return{top:.5*document.documentElement.clientHeight-.5*e,left:.5*document.documentElement.clientWidth-.5*t}}}}(jQuery,window);